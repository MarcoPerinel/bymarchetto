<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bymarchetto.it</title>
    <meta name="description" content="Showroom fotografico bymarchetto">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<script>
document.addEventListener('DOMContentLoaded', () => {

    /*
    ==================================================
    Configurazione GitHub
    ==================================================
    */
    const username = 'MarcoPerinel';
    const repo = 'bymarchetto';
    const branch = 'main';
    const folder = 'bymarchetto/assets/img';

    const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${folder}?ref=${branch}`;

    /*
    ==================================================
    Elementi DOM
    ==================================================
    */
    const gallery = document.getElementById('gallery');
    const lightbox = document.getElementById('lightbox');

    if (!gallery || !lightbox) {
        console.error('Gallery o lightbox non trovati nel DOM');
        return;
    }

    const lightboxImg = lightbox.querySelector('img');

    /*
    ==================================================
    Caricamento immagini
    ==================================================
    */
    fetch(apiUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error('GitHub API error ' + response.status);
            }
            return response.json();
        })
        .then(files => {
            if (!Array.isArray(files)) {
                throw new Error('Risposta GitHub non valida');
            }

            files
                .filter(file => /\.(webp|jpe?g|png)$/i.test(file.name))
                .forEach(file => {
                    const img = document.createElement('img');
                    img.src = file.download_url;
                    img.loading = 'lazy';

                    img.addEventListener('click', () => {
                        openLightbox(file.download_url);
                    });

                    gallery.appendChild(img);
                });
        })
        .catch(error => {
            console.error('Errore caricamento immagini:', error.message);
        });

    /*
    ==================================================
    Lightbox
    ==================================================
    */
    function openLightbox(src) {
        lightboxImg.src = src;
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
        lightbox.classList.remove('active');
        lightboxImg.src = '';
        document.body.style.overflow = '';
    }

    lightbox.addEventListener('click', closeLightbox);

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });

    /*
    ==================================================
    Anno footer
    ==================================================
    */
    const year = document.getElementById('year');
    if (year) {
        year.textContent = new Date().getFullYear();
    }

});
</script>

<body>
    <div class="site-wrapper">
        <header class="site-header">
            <div class="logo-wrapper">
                <img src="assets/logo/white-logo.png" alt="Logo bymarchetto">
            </div>
        </header>
        
        <section class="intro">
            <h1>Un racconto attraverso la lente</h1>
            <p>
                Nel mio modo di osservare il mondo, la fotografia è molto più di un semplice scatto:
                è un mezzo per fermare il tempo, per dare voce ai dettagli che altrimenti passerebbero inosservati.
                Attraverso l’obiettivo, trasformo attimi ordinari in storie visive che parlano di emozioni,
                di luoghi, di persone. Ogni immagine è il risultato di uno sguardo attento e di una sensibilità
                allenata a cogliere l’essenza, anche nel silenzio. In questo spazio ti accompagno dentro il mio
                modo di vedere, dove ogni scatto è un frammento sincero di realtà e immaginazione.
            </p>
        </section>
    
        <main class="gallery" id="gallery">
    
        </main>
    
        <footer class="site-footer">
            <p>bymarchetto © <span id="year"></span></p>
            <div class="privacy-box">
                <a href="https://www.iubenda.com/privacy-policy/49726469" class="iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe " title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
                <a href="https://www.iubenda.com/privacy-policy/49726469/cookie-policy" class="iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe " title="Cookie Policy ">Cookie Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
            </div>
            
        </footer>
    
        <script>
            document.getElementById('year').textContent = new Date().getFullYear();
        </script>
    </div>

    <div class="lightbox" id="lightbox">
        <img src="" alt="">
    </div>

</body>
</html>
